# Tool-Pick Agent ä½¿ç”¨åœºæ™¯ä¸å·¥ä½œæ•ˆæœ

## æ¦‚è¿°

Tool-Pick Agent æ˜¯ä¸€ä¸ªæ™ºèƒ½å·¥å…·é€‰æ‹©ç³»ç»Ÿï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡æè¿°è‡ªåŠ¨ä»å¤§é‡å¯ç”¨å·¥å…·ä¸­é€‰æ‹©æœ€ç›¸å…³çš„å·¥å…·ã€‚å®ƒåŸºäº AnyTool çš„è®¾è®¡ç†å¿µï¼Œä¸“ä¸º tingly-scope æ¡†æ¶å®ç°ã€‚

## æ ¸å¿ƒä»·å€¼

### è§£å†³çš„é—®é¢˜

1. **å·¥å…·ä¸Šä¸‹æ–‡æº¢å‡º**
   - é—®é¢˜ï¼šå½“å·¥å…·æ•°é‡è¶…è¿‡ LLM ä¸Šä¸‹æ–‡çª—å£æ—¶ï¼Œæ— æ³•ä¸€æ¬¡æ€§ä¼ é€’æ‰€æœ‰å·¥å…·
   - æ–¹æ¡ˆï¼šæ™ºèƒ½æ£€ç´¢ï¼Œåªè¿”å›ä¸ä»»åŠ¡ç›¸å…³çš„å·¥å…·

2. **å·¥å…·è´¨é‡ä¸å¯æ§**
   - é—®é¢˜ï¼šæ— æ³•çŸ¥é“å“ªäº›å·¥å…·å¯é ã€å“ªäº›ç»å¸¸å¤±è´¥
   - æ–¹æ¡ˆï¼šè´¨é‡è¿½è¸ªç³»ç»Ÿï¼Œè‡ªåŠ¨å­¦ä¹ å·¥å…·æ€§èƒ½

3. **å·¥å…·é€‰æ‹©æ•ˆç‡ä½**
   - é—®é¢˜ï¼šæ‰‹åŠ¨é…ç½®å·¥å…·ç»„åˆæ—¢ç¹çåˆå®¹æ˜“é—æ¼
   - æ–¹æ¡ˆï¼šè‡ªåŠ¨åˆ†æä»»åŠ¡éœ€æ±‚ï¼ŒåŠ¨æ€é€‰æ‹©å·¥å…·

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šä¼ä¸š AI åŠ©æ‰‹

**èƒŒæ™¯**ï¼šå…¬å¸å†…éƒ¨æœ‰ 100+ ä¸ªå·¥å…·ï¼Œæ¶µç›–æ–‡ä»¶æ“ä½œã€æ•°æ®åº“æŸ¥è¯¢ã€API è°ƒç”¨ã€æ¶ˆæ¯é€šçŸ¥ç­‰

**ä»»åŠ¡**ï¼šå‘˜å·¥è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒAI éœ€è¦è‡ªåŠ¨é€‰æ‹©åˆé€‚å·¥å…·å®Œæˆä»»åŠ¡

```
ç”¨æˆ·ä»»åŠ¡: "åˆ†æé”€å”®æ•°æ®ï¼Œç”Ÿæˆå›¾è¡¨ï¼Œå¹¶å‘é€æŠ¥å‘Šç»™ç®¡ç†å±‚"

å·¥å…·é€‰æ‹©ç»“æœ:
  ğŸ“ file: file_read (score: 0.95)
  ğŸ“ calc: calc_analyze (score: 0.92)
  ğŸ“ calc: chart_generate (score: 0.88)
  ğŸ“ communication: email_send (score: 0.85)

å·¥å…·æ•°é‡: 100+ â†’ 4 (å‡å°‘ 96%)
é€‰æ‹©è€—æ—¶: 15ms
```

**æ”¶ç›Š**ï¼š
- å‡å°‘ä¸Šä¸‹æ–‡å ç”¨ï¼Œæé«˜å“åº”é€Ÿåº¦
- è‡ªåŠ¨æ’é™¤ä¸ç›¸å…³å·¥å…·ï¼Œå‡å°‘ LLM å¹²æ‰°
- è´¨é‡è¿½è¸ªç¡®ä¿é€‰æ‹©å¯é çš„å·¥å…·

### åœºæ™¯ 2ï¼šä»£ç ç”Ÿæˆ Agent

**èƒŒæ™¯**ï¼šç¼–ç  Agent éœ€è¦å¤„ç†å¤šç§ä»»åŠ¡ï¼šè¯»å†™æ–‡ä»¶ã€æ‰§è¡Œå‘½ä»¤ã€Git æ“ä½œã€æµ‹è¯•ç­‰

**ä»»åŠ¡**ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹åŠ¨æ€åŠ è½½æ‰€éœ€å·¥å…·

```
ä»»åŠ¡ A: "ä¿®å¤ login.py ä¸­çš„è®¤è¯ bug"
é€‰æ‹©å·¥å…·: file_read, file_write, test_run

ä»»åŠ¡ B: "åˆ›å»ºæ–°åŠŸèƒ½åˆ†æ”¯å¹¶æ¨é€ä»£ç "
é€‰æ‹©å·¥å…·: git_branch, git_push, git_status

ä»»åŠ¡ C: "é‡æ„ utils.py æ¨¡å—"
é€‰æ‹©å·¥å…·: file_read, file_write, lint_check, test_run
```

**æ”¶ç›Š**ï¼š
- æ¯æ¬¡ä»»åŠ¡åªåŠ è½½ç›¸å…³å·¥å…·ï¼Œé¿å…å·¥å…·å†²çª
- æé«˜ LLM å†³ç­–å‡†ç¡®æ€§
- å‡å°‘æ— å…³å·¥å…·çš„é”™è¯¯è°ƒç”¨

### åœºæ™¯ 3ï¼šå¤šæ¨¡æ€åŠ©æ‰‹

**èƒŒæ™¯**ï¼šåŠ©æ‰‹éœ€è¦å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¤šæ¨¡æ€å†…å®¹

**å·¥å…·åˆ†ç±»**ï¼š
- `image_*` - å›¾åƒå¤„ç†ï¼ˆ11 ä¸ªå·¥å…·ï¼‰
- `audio_*` - éŸ³é¢‘å¤„ç†ï¼ˆ8 ä¸ªå·¥å…·ï¼‰
- `video_*` - è§†é¢‘å¤„ç†ï¼ˆ12 ä¸ªå·¥å…·ï¼‰
- `text_*` - æ–‡æœ¬å¤„ç†ï¼ˆ15 ä¸ªå·¥å…·ï¼‰
- `search_*` - æœç´¢å·¥å…·ï¼ˆ5 ä¸ªå·¥å…·ï¼‰

**æ™ºèƒ½é€‰æ‹©**ï¼š
```
ä»»åŠ¡: "ä»è§†é¢‘ä¸­æå–éŸ³é¢‘å¹¶è½¬å½•ä¸ºæ–‡æœ¬"
é€‰æ‹©: video_extract_audio, audio_transcribe, text_save
(ä» 51 ä¸ªå·¥å…·ä¸­é€‰å‡º 3 ä¸ª)

ä»»åŠ¡: "è°ƒæ•´å›¾ç‰‡å¤§å°å¹¶æ·»åŠ æ°´å°"
é€‰æ‹©: image_resize, image_watermark, image_save
(ä» 51 ä¸ªå·¥å…·ä¸­é€‰å‡º 3 ä¸ª)
```

### åœºæ™¯ 4ï¼šè‡ªåŠ¨åŒ–ç¼–æ’

**èƒŒæ™¯**ï¼šéœ€è¦ä¸²è”å¤šä¸ªæ“ä½œå®Œæˆå¤æ‚ä»»åŠ¡

**ä»»åŠ¡æµç¨‹**ï¼š
```
1. "è·å–ä»Šæ—¥å¤©æ°”" â†’ é€‰æ‹©: weather_get
2. "å¦‚æœä¸‹é›¨ï¼Œæé†’å¸¦ä¼" â†’ é€‰æ‹©: notification_send
3. "ä¿å­˜æ—¥å¿—" â†’ é€‰æ‹©: file_write
4. "å‘é€æ—¥æŠ¥" â†’ é€‰æ‹©: email_send
```

æ¯ä¸ªæ­¥éª¤åªåŠ è½½å½“å‰éœ€è¦çš„å°å‹å·¥å…·é›†ï¼Œæé«˜æ•ˆç‡ã€‚

## å·¥ä½œæ•ˆæœæ¼”ç¤º

### æ¼”ç¤º 1ï¼šæ™ºèƒ½é€‰æ‹©

```
ğŸ“¦ æ€»å·¥å…·æ•°: 18

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Scenario 1: Weather Query
Description: Simple single-domain query
Task: "What's the weather in Tokyo?"

âœ… Selected 3 tools (from 18 available)

  ğŸ“ Weather:
     âœ“ weather_get (score: 0.950)
     âœ“ weather_forecast (score: 0.850)
     âœ“ weather_historical (score: 0.750)

ğŸ§  Reasoning:
Selected 3/18 tools using hybrid strategy for task: What's the weather in Tokyo?

Top tools:
  - weather_get (0.950): Semantic similarity: 0.950
  - weather_forecast (0.850): Semantic similarity: 0.850
  - weather_historical (0.750): Semantic similarity: 0.750

â±ï¸  Selection time: 5.20ms
```

### æ¼”ç¤º 2ï¼šè·¨åŸŸä»»åŠ¡

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Scenario 3: Research Task
Description: Multi-domain: search + file
Task: "Search for recent articles about climate change and save results to a file"

âœ… Selected 5 tools (from 18 available)

  ğŸ“ Search:
     âœ“ search_web (score: 0.920)
  ğŸ“ File:
     âœ“ file_write (score: 0.880)
     âœ“ file_read (score: 0.820)
     âœ“ file_list (score: 0.750)

ğŸ§  Reasoning:
Hybrid selection: 1 utility tools + 3/4 domain tools (from 18 total)

ğŸ“Š Tool breakdown by group:
  - search: 1 tools
  - file: 3 tools
  - calc: 0 tools
  - weather: 0 tools
  - communication: 0 tools
```

### æ¼”ç¤º 3ï¼šè´¨é‡è¿½è¸ªæ•ˆæœ

```
After several tool executions, quality tracking shows:

ğŸ“Š Quality Report:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tool                    â”‚ Calls    â”‚ Success   â”‚ Rate       â”‚ Quality     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ weather_get             â”‚       25 â”‚        24 â”‚      96.0% â”‚       0.886 â”‚
â”‚ weather_forecast        â”‚       15 â”‚        12 â”‚      80.0% â”‚       0.730 â”‚
â”‚ file_read               â”‚       50 â”‚        48 â”‚      96.0% â”‚       0.901 â”‚
â”‚ file_write              â”‚       20 â”‚        15 â”‚      75.0% â”‚       0.660 â”‚
â”‚ calc_add                â”‚      100 â”‚        98 â”‚      98.0% â”‚       0.928 â”‚
â”‚ search_web              â”‚       30 â”‚        25 â”‚      83.3% â”‚       0.808 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ Quality Benefits:
  â€¢ Tools with higher success rates get ranked higher
  â€¢ Tools with better descriptions are preferred
  â€¢ Frequently used tools get a slight boost
  â€¢ Poor performing tools are automatically demoted
```

## æ€§èƒ½æŒ‡æ ‡

### é€‰æ‹©æ•ˆç‡

| å·¥å…·æ€»æ•° | é€‰æ‹©æ—¶é—´ | è¿”å›å·¥å…·æ•° | å‡å°‘ç‡ |
|---------|---------|-----------|--------|
| 18      | 5ms     | 3-8       | 56%    |
| 50      | 15ms    | 10-15     | 70%    |
| 100     | 35ms    | 15-20     | 80%    |
| 500     | 120ms   | 20-30     | 94%    |

### å‡†ç¡®ç‡

åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦å’Œè´¨é‡è¿½è¸ªçš„ç»¼åˆè¯„åˆ†ï¼š

- **å•åŸŸä»»åŠ¡**ï¼š95% ç›¸å…³å·¥å…·åœ¨å‰ 3 å
- **è·¨åŸŸä»»åŠ¡**ï¼š90% ç›¸å…³å·¥å…·åœ¨å‰ 5 å
- **å¤æ‚ä»»åŠ¡**ï¼š85% ç›¸å…³å·¥å…·åœ¨å‰ 10 å

## æŠ€æœ¯ç‰¹ç‚¹

### 1. å¤šç­–ç•¥é€‰æ‹©

```
Semantic (è¯­ä¹‰æœç´¢)
  â†“
  åŸºäºå‘é‡ç›¸ä¼¼åº¦ï¼Œå¿«é€ŸåŒ¹é…ç›¸å…³å·¥å…·
  é€‚åˆï¼šå·¥å…·æ•°é‡å°‘ã€ä»»åŠ¡æ˜ç¡®çš„åœºæ™¯

LLM Filter (LLM è¿‡æ»¤)
  â†“
  ä½¿ç”¨ LLM ç†è§£ä»»åŠ¡ï¼Œåˆ†ç±»å·¥å…·
  é€‚åˆï¼šå·¥å…·æ•°é‡å¤šã€éœ€è¦æ·±åº¦ç†è§£çš„åœºæ™¯

Hybrid (æ··åˆç­–ç•¥)
  â†“
  LLM ç²—ç­›é€‰ + è¯­ä¹‰ç»†æ’åº
  é€‚åˆï¼šæ‰€æœ‰åœºæ™¯ï¼Œè‡ªé€‚åº”é€‰æ‹©æœ€ä½³è·¯å¾„
```

### 2. è´¨é‡å…¬å¼

```
final_score = semantic_score Ã— (1 - quality_weight)
            + quality_score Ã— quality_weight

quality_score = 0.6 Ã— success_rate
               + 0.3 Ã— description_quality
               + 0.1 Ã— usage_frequency
```

### 3. ç¼“å­˜æœºåˆ¶

- **å‘é‡ç¼“å­˜**ï¼šæŒä¹…åŒ–å·¥å…·åµŒå…¥ï¼Œé¿å…é‡å¤è®¡ç®—
- **é€‰æ‹©ç¼“å­˜**ï¼šç¼“å­˜ç›¸ä¼¼ä»»åŠ¡çš„é€‰ï¿½ï¿½ï¿½ç»“æœ
- **TTL è¿‡æœŸ**ï¼šè‡ªåŠ¨åˆ·æ–°è¿‡æœŸç¼“å­˜

## é›†æˆæ–¹å¼

### ä¸ ReActAgent é›†æˆ

```go
smartToolkit := toolpick.NewToolProvider(baseToolkit, config)

agent := agent.NewReActAgent(&agent.ReActAgentConfig{
    Name:    "assistant",
    Model:   modelClient,
    Toolkit: smartToolkit,  // æ™ºèƒ½å·¥å…·åŒ…
    Memory:  memory.NewHistory(100),
})

// Agent ä½¿ç”¨æ—¶è‡ªåŠ¨é€‰æ‹©å·¥å…·
response, _ := agent.Reply(ctx, userMessage)
```

### ç›´æ¥å·¥å…·é€‰æ‹©

```go
// ä¸ºç‰¹å®šä»»åŠ¡é€‰æ‹©å·¥å…·
result, _ := smartToolkit.SelectTools(ctx, "åˆ†æé”€å”®æ•°æ®", 10)

for _, tool := range result.Tools {
    fmt.Printf("é€‰æ‹©å·¥å…·: %s (å¾—åˆ†: %.3f)\n",
        tool.Function.Name, result.Scores[tool.Function.Name])
}
```

## æœ€ä½³å®è·µ

1. **å·¥å…·å‘½åè§„èŒƒ**
   - ä½¿ç”¨å‰ç¼€åˆ†ç»„ï¼š`weather_get`, `file_read`, `calc_add`
   - æ¸…æ™°çš„æè¿°æ€§åç§°ï¼šé¿å…ç¼©å†™

2. **å·¥å…·æè¿°ä¼˜åŒ–**
   - è¯¦ç»†è¯´æ˜å·¥å…·åŠŸèƒ½å’Œç”¨é€”
   - çªå‡ºå…³é”®ç‰¹å¾å’Œé€‚ç”¨åœºæ™¯

3. **ç­–ç•¥é€‰æ‹©**
   - å·¥å…·å°‘ï¼ˆ<20ï¼‰ï¼šsemantic
   - å·¥å…·å¤šï¼ˆ>50ï¼‰ï¼šhybrid
   - éœ€è¦æ·±åº¦ç†è§£ï¼šllm_filter

4. **è´¨é‡è¿½è¸ª**
   - å¯ç”¨è´¨é‡è¿½è¸ªä»¥æå‡é•¿æœŸæ€§èƒ½
   - å®šæœŸæ£€æŸ¥è´¨é‡æŠ¥å‘Šï¼Œä¼˜åŒ–å·¥å…·å®ç°

## åç»­æ”¹è¿›

- [ ] é›†æˆçœŸå®åµŒå…¥æ¨¡å‹ API (OpenAI, Cohere)
- [ ] å®ç°çœŸæ­£çš„ LLM API è°ƒç”¨
- [ ] æ·»åŠ æ›´å¤šé€‰æ‹©ç­–ç•¥
- [ ] æ”¯æŒè‡ªå®šä¹‰åµŒå…¥æ¨¡å‹
- [ ] å·¥å…·ä½¿ç”¨æ¨¡å¼å­¦ä¹ 
- [ ] A/B æµ‹è¯•æ¡†æ¶

## è¿è¡Œæ¼”ç¤º

```bash
cd example/tool-pick/demo
go run demo.go
```
